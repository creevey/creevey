import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';

import { ImagesView as ImagesViewBase } from '../src/client/shared/components/ImagesView';
import { ImagesViewMode, CSFStory } from '../src/types';

import octocatExpect from './fixtures/octocat-expect.png';
import octocatDiff from './fixtures/octocat-diff.png';
import octocatActual from './fixtures/octocat-actual.png';

export const ImagesView = (mode) => (
  <ImagesViewBase
    image={{ expect: octocatExpect, diff: octocatDiff, actual: octocatActual }}
    url=""
    canApprove
    mode={mode}
  />
);

<Meta title="Docs/ImagesViews" component={ImagesViewBase} />

# Creevey Diff Image views

This is a simple doc page with different diff image views

## Side-by-side

Simple side-by-side view. Expected image on the right, actual on the left and diff image on the middle

<Canvas>
  <Story name="SideBySide">{() => ImagesView('side-by-side')}</Story>
</Canvas>

## Swap

Swap view, allow to swap between expected and actual images by click

<Canvas>
  <Story name="Swap" parameters={{ creevey: { waitForReady: true } }}>
    {() => ImagesView('swap')}
  </Story>
</Canvas>

## Slide

Most powerful view, allow to see differences using slider on expected and actual images

<Canvas>
  <Story
    name="Slide"
    parameters={{
      creevey: {
        waitForReady: true,
        tests: {
          async click() {
            const idle = await this.takeScreenshot();
            await this.browser.actions().click(this.captureElement).perform();
            const click = await this.takeScreenshot();
            await this.expect({ idle, click }).to.matchImages();
          },
        },
      },
    }}
  >
    {() => ImagesView('slide')}
  </Story>
</Canvas>

## Blend

Blend view is like diff image but generated by CSS with `filter` style

<Canvas>
  <Story name="Blend">{() => ImagesView('blend')}</Story>
</Canvas>
