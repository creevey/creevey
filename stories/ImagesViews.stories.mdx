import { Meta, Story, Canvas } from '@storybook/addon-docs';
import { fireEvent, within } from '@storybook/testing-library';

import { capture } from '../src/client/addon';
import { ImagesView as ImagesViewBase } from '../src/client/shared/components/ImagesView';

import octocatExpect from './fixtures/octocat-expect.png';
import octocatDiff from './fixtures/octocat-diff.png';
import octocatActual from './fixtures/octocat-actual.png';

export const ImagesView = (mode) => (
  <ImagesViewBase
    image={{ expect: octocatExpect, diff: octocatDiff, actual: octocatActual }}
    url={new URL(import.meta.url).origin}
    canApprove
    mode={mode}
  />
);

<Meta title="Docs/ImagesViews" component={ImagesViewBase} />

# Creevey Diff Image views

This is a simple doc page with different diff image views

## Side-by-side

Simple side-by-side view. Expected image on the right, actual on the left and diff image on the middle

<Canvas>
  <Story name="SideBySide" parameters={{ creevey: { waitForReady: true } }}>
    {() => ImagesView('side-by-side')}
  </Story>
</Canvas>

## Swap

Swap view, allow to swap between expected and actual images by click

<Canvas>
  <Story name="Swap" parameters={{ creevey: { waitForReady: true } }}>
    {() => ImagesView('swap')}
  </Story>
</Canvas>

## Slide

Most powerful view, allow to see differences using slider on expected and actual images

<Canvas>
  <Story name="Slide" parameters={{ creevey: { waitForReady: true } }}>
    {() => ImagesView('slide')}
  </Story>
</Canvas>

## Blend

Blend view is like diff image but generated by CSS with `filter` style

<Canvas>
  <Story name="Blend">{() => ImagesView('blend')}</Story>
</Canvas>
